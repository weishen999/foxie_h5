{"version":3,"sources":["webpack:///src/views/search.vue","webpack:///./src/views/search.vue?4346","webpack:///./src/views/search.vue","webpack:///./src/assets/loading.svg"],"names":["search","name","components","PList","List","created","this","$bus","title","data","val","list","page","total","loading","pullUpLoadText","methods","getSearch","_this","api","pageNo","pageSize","searchName","then","res","code","setTimeout","content","forEach","element","push","totalElements","$nextTick","scroll","refresh","bscroll_esm","click","scrollY","length","on","pos","maxScrollY","y","alert","watch","views_search","render","_vm","_h","$createElement","_c","_self","staticClass","directives","rawName","value","expression","attrs","type","placeholder","domProps","input","$event","target","composing","_v","_e","src","__webpack_require__","staticRenderFns","Component","normalizeComponent","ssrContext","__webpack_exports__","module","exports"],"mappings":"+IAsBAA,GACAC,KAAA,SACAC,YAAAC,MAAAC,EAAA,GACAC,QAHA,WAIAC,KAAAC,KAAAC,MAAA,MAEAC,KANA,WAOA,OACAC,IAAA,GACAC,QACAC,KAAA,EACAC,MAAA,KACAC,SAAA,EACAC,eAAA,cAGAC,SACAC,UADA,WACA,IAAAC,EAAAZ,KACAA,KAAAQ,SAAA,EACAK,EAAA,EAAAF,WACAG,OAAA,EACAC,SAAA,GACAC,WAAAhB,KAAAI,MACAa,KAAA,SAAAC,GACA,IAAAA,EAAAf,KAAAgB,MACAC,WAAA,WACAR,EAAAJ,SAAA,GACA,KACAU,EAAAf,UAAAkB,QAAAC,QAAA,SAAAC,GACAX,EAAAP,KAAAmB,KAAAD,KAEAX,EAAAL,MAAAW,EAAAf,UAAAsB,cACAb,EAAAc,UAAA,WACAd,EAAAe,OAoBAf,EAAAe,OAAAC,WAnBAhB,EAAAe,OAAA,IAAAE,EAAA,kBACAC,OAAA,EACAC,SAAA,IAEAnB,EAAAP,KAAA2B,SAAApB,EAAAL,MACAK,EAAAH,eAAA,QAEAG,EAAAe,OAAAM,GAAA,oBAAAC,GACAtB,EAAAe,OAAAQ,WAAAD,EAAAE,EAAA,KACAxB,EAAAP,KAAA2B,SAAApB,EAAAL,MACAK,EAAAH,eAAA,SAEAG,EAAAN,OACAM,EAAAD,oBAUA0B,MAAA,kBAKAC,OACAlC,IADA,WAEAJ,KAAAK,WCnFAkC,GADiBC,OAFjB,WAA0B,IAAAC,EAAAzC,KAAa0C,EAAAD,EAAAE,eAA0BC,EAAAH,EAAAI,MAAAD,IAAAF,EAAwB,OAAAE,EAAA,OAAiBE,YAAA,aAAuBF,EAAA,OAAYE,YAAA,YAAsBF,EAAA,SAAcG,aAAapD,KAAA,QAAAqD,QAAA,UAAAC,MAAAR,EAAA,IAAAS,WAAA,QAAgEC,OAASC,KAAA,OAAAC,YAAA,WAAsCC,UAAWL,MAAAR,EAAA,KAAkBR,IAAKsB,MAAA,SAAAC,GAAyBA,EAAAC,OAAAC,YAAsCjB,EAAArC,IAAAoD,EAAAC,OAAAR,WAA8BR,EAAAkB,GAAA,KAAAf,EAAA,QAAyBE,YAAA,SAAAb,IAAyBH,MAAAW,EAAA9B,aAAuB8B,EAAAkB,GAAA,UAAAlB,EAAAkB,GAAA,KAAAf,EAAA,OAAyCE,YAAA,gBAA0BL,EAAApC,KAAA2B,OAAA,EAAAY,EAAA,UAAqCO,OAAOjD,MAAA,OAAAkD,KAAA,OAAA/C,KAAAoC,EAAApC,KAAAI,eAAAgC,EAAAhC,kBAAkFgC,EAAAmB,KAAAnB,EAAAkB,GAAA,SAAAlB,EAAApC,KAAA2B,OAAAY,EAAA,KAAuDE,YAAA,cAAwBL,EAAAkB,GAAA,UAAAlB,EAAAmB,KAAAnB,EAAAkB,GAAA,KAAAf,EAAA,OAAkDG,aAAapD,KAAA,OAAAqD,QAAA,SAAAC,MAAAR,EAAA,QAAAS,WAAA,YAAsEJ,YAAA,YAAwBF,EAAA,OAAYO,OAAOU,IAAAC,EAAA,WAAwCrB,EAAAkB,GAAA,KAAAf,EAAA,QAAyBE,YAAA,SAAmBL,EAAAkB,GAAA,qBAEx/BI,oBCCjB,IAcAC,EAdAF,EAAA,OAcAG,CACAvE,EACA6C,GATA,EAVA,SAAA2B,GACAJ,EAAA,SAaA,KAEA,MAUAK,EAAA,QAAAH,EAAA,mDC1BAI,EAAAC,QAAA","file":"static/js/2.70bb6fce27513454a32b.js","sourcesContent":["<template>\n  <div class=\"p-search\">\n    <div class=\"p-input\">\n      <input type=\"text\" v-model=\"val\" placeholder=\"请输入搜索内容\">\n      <span class=\"search\" @click=\"getSearch\">搜索</span>\n    </div>\n    <div class=\"p-page-list\">\n      <p-list title=\"搜索结果\" type=\"text\" :list=\"list\" v-if=\"list.length > 0\" :pullUpLoadText=\"pullUpLoadText\"></p-list>\n      <p v-if=\"list.length === 0\" class=\"p-nothing\">暂无结果</p>\n      <div class=\"loading\" v-show=\"loading\">\n        <img src=\"../assets/loading.svg\">\n        <span class=\"text\">加载中...</span>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nimport Api from \"../api\";\nimport PList from \"../components/List\";\nimport Bscroll from \"better-scroll\";\n\nexport default {\n  name: \"Search\",\n  components: { PList },\n  created() {\n    this.$bus.title = \"搜索\";\n  },\n  data() {\n    return {\n      val: \"\",\n      list: [],\n      page: 0,\n      total: null,\n      loading: false,\n      pullUpLoadText: \"上拉加载更多...\"\n    };\n  },\n  methods: {\n    getSearch() {\n      this.loading = true;\n      Api.getSearch({\n        pageNo: 0,\n        pageSize: 20,\n        searchName: this.val\n      }).then(res => {\n        if (res.data.code === 0) {\n          setTimeout(() => {\n            this.loading = false;\n          }, 500);\n          res.data.data.content.forEach(element => {\n            this.list.push(element);\n          });\n          this.total = res.data.data.totalElements;\n          this.$nextTick(() => {\n            if (!this.scroll) {\n              this.scroll = new Bscroll(\".p-page-list\", {\n                click: true,\n                scrollY: true\n              });\n              if (this.list.length === this.total) {\n                this.pullUpLoadText = \"没有更多了\";\n              } else {\n                this.scroll.on(\"touchEnd\", pos => {\n                  if (this.scroll.maxScrollY > pos.y + 50) {\n                    if (this.list.length === this.total) {\n                      this.pullUpLoadText = \"没有更多了\";\n                    } else {\n                      this.page++;\n                      this.getSearch();\n                    }\n                  }\n                });\n              }\n            } else {\n              this.scroll.refresh();\n            }\n          });\n        } else {\n          alert(\"网络错误，请刷新重试\");\n        }\n      });\n    }\n  },\n  watch: {\n    val() {\n      this.list = [];\n    }\n  }\n};\n</script>\n\n<style lang=\"scss\">\n@import \"../styles/variables.scss\";\n.p-search {\n  margin-top: 87px !important;\n  .p-page-list {\n    height: 80vh;\n    overflow: visible;\n  }\n  .p-input {\n    position: fixed;\n    top: 56px;\n    left: 50%;\n    z-index: 10;\n    transform: translateX(-50%);\n    width: 100%;\n    height: 50px;\n    display: flex;\n    justify-content: space-between;\n    align-items: center;\n    background: $white;\n    margin: auto;\n    overflow: hidden;\n    border-bottom: 1px solid $border;\n    input {\n      height: 100%;\n      padding: 0 20px;\n      flex: 1;\n      font-size: 14px;\n    }\n    .search {\n      height: 100%;\n      width: 80px;\n      background: $border;\n      text-align: center;\n      line-height: 50px;\n    }\n  }\n}\n</style>\n\n\n\n// WEBPACK FOOTER //\n// src/views/search.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"p-search\"},[_c('div',{staticClass:\"p-input\"},[_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.val),expression:\"val\"}],attrs:{\"type\":\"text\",\"placeholder\":\"请输入搜索内容\"},domProps:{\"value\":(_vm.val)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.val=$event.target.value}}}),_vm._v(\" \"),_c('span',{staticClass:\"search\",on:{\"click\":_vm.getSearch}},[_vm._v(\"搜索\")])]),_vm._v(\" \"),_c('div',{staticClass:\"p-page-list\"},[(_vm.list.length > 0)?_c('p-list',{attrs:{\"title\":\"搜索结果\",\"type\":\"text\",\"list\":_vm.list,\"pullUpLoadText\":_vm.pullUpLoadText}}):_vm._e(),_vm._v(\" \"),(_vm.list.length === 0)?_c('p',{staticClass:\"p-nothing\"},[_vm._v(\"暂无结果\")]):_vm._e(),_vm._v(\" \"),_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.loading),expression:\"loading\"}],staticClass:\"loading\"},[_c('img',{attrs:{\"src\":require(\"../assets/loading.svg\")}}),_vm._v(\" \"),_c('span',{staticClass:\"text\"},[_vm._v(\"加载中...\")])])],1)])}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-4ead234d\",\"hasScoped\":false,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/views/search.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-4ead234d\\\",\\\"scoped\\\":false,\\\"hasInlineConfig\\\":false}!sass-loader?{\\\"sourceMap\\\":true}!../../node_modules/vue-loader/lib/selector?type=styles&index=0!./search.vue\")\n}\nvar normalizeComponent = require(\"!../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./search.vue\"\nimport __vue_script__ from \"!!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./search.vue\"\n/* template */\nimport __vue_template__ from \"!!../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-4ead234d\\\",\\\"hasScoped\\\":false,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../node_modules/vue-loader/lib/selector?type=template&index=0!./search.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/views/search.vue\n// module id = null\n// module chunks = ","module.exports = \"data:image/svg+xml;base64,PHN2ZyBjbGFzcz0ibGRzLXNwaW5uZXIiIHdpZHRoPSIyMDBweCIgIGhlaWdodD0iMjAwcHgiICB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiB2aWV3Qm94PSIwIDAgMTAwIDEwMCIgcHJlc2VydmVBc3BlY3RSYXRpbz0ieE1pZFlNaWQiIHN0eWxlPSJiYWNrZ3JvdW5kOiBub25lOyI+PGcgdHJhbnNmb3JtPSJyb3RhdGUoMCA1MCA1MCkiPgogIDxyZWN0IHg9IjQ3IiB5PSIyNCIgcng9IjkuNCIgcnk9IjQuOCIgd2lkdGg9IjYiIGhlaWdodD0iMTIiIGZpbGw9IiNmZmZmZmYiPgogICAgPGFuaW1hdGUgYXR0cmlidXRlTmFtZT0ib3BhY2l0eSIgdmFsdWVzPSIxOzAiIHRpbWVzPSIwOzEiIGR1cj0iMXMiIGJlZ2luPSItMC45MTY2NjY2NjY2NjY2NjY2cyIgcmVwZWF0Q291bnQ9ImluZGVmaW5pdGUiPjwvYW5pbWF0ZT4KICA8L3JlY3Q+CjwvZz48ZyB0cmFuc2Zvcm09InJvdGF0ZSgzMCA1MCA1MCkiPgogIDxyZWN0IHg9IjQ3IiB5PSIyNCIgcng9IjkuNCIgcnk9IjQuOCIgd2lkdGg9IjYiIGhlaWdodD0iMTIiIGZpbGw9IiNmZmZmZmYiPgogICAgPGFuaW1hdGUgYXR0cmlidXRlTmFtZT0ib3BhY2l0eSIgdmFsdWVzPSIxOzAiIHRpbWVzPSIwOzEiIGR1cj0iMXMiIGJlZ2luPSItMC44MzMzMzMzMzMzMzMzMzM0cyIgcmVwZWF0Q291bnQ9ImluZGVmaW5pdGUiPjwvYW5pbWF0ZT4KICA8L3JlY3Q+CjwvZz48ZyB0cmFuc2Zvcm09InJvdGF0ZSg2MCA1MCA1MCkiPgogIDxyZWN0IHg9IjQ3IiB5PSIyNCIgcng9IjkuNCIgcnk9IjQuOCIgd2lkdGg9IjYiIGhlaWdodD0iMTIiIGZpbGw9IiNmZmZmZmYiPgogICAgPGFuaW1hdGUgYXR0cmlidXRlTmFtZT0ib3BhY2l0eSIgdmFsdWVzPSIxOzAiIHRpbWVzPSIwOzEiIGR1cj0iMXMiIGJlZ2luPSItMC43NXMiIHJlcGVhdENvdW50PSJpbmRlZmluaXRlIj48L2FuaW1hdGU+CiAgPC9yZWN0Pgo8L2c+PGcgdHJhbnNmb3JtPSJyb3RhdGUoOTAgNTAgNTApIj4KICA8cmVjdCB4PSI0NyIgeT0iMjQiIHJ4PSI5LjQiIHJ5PSI0LjgiIHdpZHRoPSI2IiBoZWlnaHQ9IjEyIiBmaWxsPSIjZmZmZmZmIj4KICAgIDxhbmltYXRlIGF0dHJpYnV0ZU5hbWU9Im9wYWNpdHkiIHZhbHVlcz0iMTswIiB0aW1lcz0iMDsxIiBkdXI9IjFzIiBiZWdpbj0iLTAuNjY2NjY2NjY2NjY2NjY2NnMiIHJlcGVhdENvdW50PSJpbmRlZmluaXRlIj48L2FuaW1hdGU+CiAgPC9yZWN0Pgo8L2c+PGcgdHJhbnNmb3JtPSJyb3RhdGUoMTIwIDUwIDUwKSI+CiAgPHJlY3QgeD0iNDciIHk9IjI0IiByeD0iOS40IiByeT0iNC44IiB3aWR0aD0iNiIgaGVpZ2h0PSIxMiIgZmlsbD0iI2ZmZmZmZiI+CiAgICA8YW5pbWF0ZSBhdHRyaWJ1dGVOYW1lPSJvcGFjaXR5IiB2YWx1ZXM9IjE7MCIgdGltZXM9IjA7MSIgZHVyPSIxcyIgYmVnaW49Ii0wLjU4MzMzMzMzMzMzMzMzMzRzIiByZXBlYXRDb3VudD0iaW5kZWZpbml0ZSI+PC9hbmltYXRlPgogIDwvcmVjdD4KPC9nPjxnIHRyYW5zZm9ybT0icm90YXRlKDE1MCA1MCA1MCkiPgogIDxyZWN0IHg9IjQ3IiB5PSIyNCIgcng9IjkuNCIgcnk9IjQuOCIgd2lkdGg9IjYiIGhlaWdodD0iMTIiIGZpbGw9IiNmZmZmZmYiPgogICAgPGFuaW1hdGUgYXR0cmlidXRlTmFtZT0ib3BhY2l0eSIgdmFsdWVzPSIxOzAiIHRpbWVzPSIwOzEiIGR1cj0iMXMiIGJlZ2luPSItMC41cyIgcmVwZWF0Q291bnQ9ImluZGVmaW5pdGUiPjwvYW5pbWF0ZT4KICA8L3JlY3Q+CjwvZz48ZyB0cmFuc2Zvcm09InJvdGF0ZSgxODAgNTAgNTApIj4KICA8cmVjdCB4PSI0NyIgeT0iMjQiIHJ4PSI5LjQiIHJ5PSI0LjgiIHdpZHRoPSI2IiBoZWlnaHQ9IjEyIiBmaWxsPSIjZmZmZmZmIj4KICAgIDxhbmltYXRlIGF0dHJpYnV0ZU5hbWU9Im9wYWNpdHkiIHZhbHVlcz0iMTswIiB0aW1lcz0iMDsxIiBkdXI9IjFzIiBiZWdpbj0iLTAuNDE2NjY2NjY2NjY2NjY2N3MiIHJlcGVhdENvdW50PSJpbmRlZmluaXRlIj48L2FuaW1hdGU+CiAgPC9yZWN0Pgo8L2c+PGcgdHJhbnNmb3JtPSJyb3RhdGUoMjEwIDUwIDUwKSI+CiAgPHJlY3QgeD0iNDciIHk9IjI0IiByeD0iOS40IiByeT0iNC44IiB3aWR0aD0iNiIgaGVpZ2h0PSIxMiIgZmlsbD0iI2ZmZmZmZiI+CiAgICA8YW5pbWF0ZSBhdHRyaWJ1dGVOYW1lPSJvcGFjaXR5IiB2YWx1ZXM9IjE7MCIgdGltZXM9IjA7MSIgZHVyPSIxcyIgYmVnaW49Ii0wLjMzMzMzMzMzMzMzMzMzMzNzIiByZXBlYXRDb3VudD0iaW5kZWZpbml0ZSI+PC9hbmltYXRlPgogIDwvcmVjdD4KPC9nPjxnIHRyYW5zZm9ybT0icm90YXRlKDI0MCA1MCA1MCkiPgogIDxyZWN0IHg9IjQ3IiB5PSIyNCIgcng9IjkuNCIgcnk9IjQuOCIgd2lkdGg9IjYiIGhlaWdodD0iMTIiIGZpbGw9IiNmZmZmZmYiPgogICAgPGFuaW1hdGUgYXR0cmlidXRlTmFtZT0ib3BhY2l0eSIgdmFsdWVzPSIxOzAiIHRpbWVzPSIwOzEiIGR1cj0iMXMiIGJlZ2luPSItMC4yNXMiIHJlcGVhdENvdW50PSJpbmRlZmluaXRlIj48L2FuaW1hdGU+CiAgPC9yZWN0Pgo8L2c+PGcgdHJhbnNmb3JtPSJyb3RhdGUoMjcwIDUwIDUwKSI+CiAgPHJlY3QgeD0iNDciIHk9IjI0IiByeD0iOS40IiByeT0iNC44IiB3aWR0aD0iNiIgaGVpZ2h0PSIxMiIgZmlsbD0iI2ZmZmZmZiI+CiAgICA8YW5pbWF0ZSBhdHRyaWJ1dGVOYW1lPSJvcGFjaXR5IiB2YWx1ZXM9IjE7MCIgdGltZXM9IjA7MSIgZHVyPSIxcyIgYmVnaW49Ii0wLjE2NjY2NjY2NjY2NjY2NjY2cyIgcmVwZWF0Q291bnQ9ImluZGVmaW5pdGUiPjwvYW5pbWF0ZT4KICA8L3JlY3Q+CjwvZz48ZyB0cmFuc2Zvcm09InJvdGF0ZSgzMDAgNTAgNTApIj4KICA8cmVjdCB4PSI0NyIgeT0iMjQiIHJ4PSI5LjQiIHJ5PSI0LjgiIHdpZHRoPSI2IiBoZWlnaHQ9IjEyIiBmaWxsPSIjZmZmZmZmIj4KICAgIDxhbmltYXRlIGF0dHJpYnV0ZU5hbWU9Im9wYWNpdHkiIHZhbHVlcz0iMTswIiB0aW1lcz0iMDsxIiBkdXI9IjFzIiBiZWdpbj0iLTAuMDgzMzMzMzMzMzMzMzMzMzNzIiByZXBlYXRDb3VudD0iaW5kZWZpbml0ZSI+PC9hbmltYXRlPgogIDwvcmVjdD4KPC9nPjxnIHRyYW5zZm9ybT0icm90YXRlKDMzMCA1MCA1MCkiPgogIDxyZWN0IHg9IjQ3IiB5PSIyNCIgcng9IjkuNCIgcnk9IjQuOCIgd2lkdGg9IjYiIGhlaWdodD0iMTIiIGZpbGw9IiNmZmZmZmYiPgogICAgPGFuaW1hdGUgYXR0cmlidXRlTmFtZT0ib3BhY2l0eSIgdmFsdWVzPSIxOzAiIHRpbWVzPSIwOzEiIGR1cj0iMXMiIGJlZ2luPSIwcyIgcmVwZWF0Q291bnQ9ImluZGVmaW5pdGUiPjwvYW5pbWF0ZT4KICA8L3JlY3Q+CjwvZz48L3N2Zz4=\"\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/assets/loading.svg\n// module id = nuJt\n// module chunks = 1 2"],"sourceRoot":""}